## Conduit 4337 Bundler

### Bundler

The bundler URL will be deployed to `https://bundler-{YOUR_NETWORK_SLUG}.t.conduit.xyz`.
Our bundler supports all of the `eth`-namespaced RPC methods, as described by the [ERC-4337 spec](https://eips.ethereum.org/EPS/eip-4337#rpc-methods-eth-namespace) :

```
eth_chainId
eth_supportedEntryPoints
eth_estimateUserOperationGas
eth_sendUserOperation
eth_getUserOperationByHash
eth_getUserOperationReceipt
```

## Contracts

- Entrypoint
  - `0.6.0`: not supported or deployed
  - `0.7.0`: deployed by default when you install the 4337 bundler integration to `0x0000000071727De22E5E9d8BAf0edAc6f37da032`
- Safe Integration
  - `Safe4337Module` (version `0.3.0`): `0x75cf11467937ce3F2f357CE24ffc3DBF8fD5c226`
  - `SafeModuleSetup` (version `0.3.0`): `0x2dd68b007B46fBe91B9A7c3EDa5A7a1063cB5b47`
  - Both of these are compatible with the `0.7.0` EntryPoint and deployed when you install the 4337 bundler integration. To turn your Safe wallet into a 4337 smart account, consult the [Safe docs](https://docs.safe.global/advanced/erc-4337/4337-safe).
- Other Contracts
  - `SimpleAccountFactory` : `0x0ACDDd4868E24aad6A16573b416133F58795A916`
  - `TestCounter` : `0x475d5a5B128c1846b86493b357e75E27201447B7`

## Sending UserOperations

Note that we only support 0.7.0 UserOperations which look like:

```
type UserOperation = {
    /*
     * Required fields
     */
    sender: string;                            // address
    nonce: string;                             // uint256, hex string. The first 192 bits are the nonce key, the last 64 bits are the nonce value
    call_data: string;                         // bytes
    call_gas_limit: string;                    // uint128, hex string
    verification_gas_limit: string;            // uint128, hex string
    pre_verification_gas: string;              // uint256, hex string
    max_priority_fee_per_gas: string;          // uint128, hex string
    max_fee_per_gas: string;                   // uint128, hex string
    signature: string;                         // bytes

    /*
     * Optional fields
     */
    factory?: string;                          // address, populated if deploying a new sender contract
    factory_data?: string;                     // bytes
    paymaster?: string;                        // address, populated if using a paymaster
    paymaster_verification_gas_limit?: string; // uint128, hex string
    paymaster_post_op_gas_limit?: string;      // uint128, hex string
    paymaster_data?: string;                   // bytes
};
```

### Example:

[Conduitâ€™s fork](https://github.com/conduitxyz/account-abstraction) of the official account-abstraction repo has scripts for creating a SimpleAccount, funding it, and sending a test transaction. Clone the repo and follow the [README.md](http://README.md) to try it out.
